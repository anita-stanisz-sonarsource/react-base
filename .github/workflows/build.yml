name: Build
on:
 push:
  branches:
    - main
 pull_request:
  types: [opened, synchronize, reopened]  

  
jobs:
  sonarqube:
   name: SonarCloud_SQ3
   runs-on: ubuntu-latest
   steps:
     - uses: actions/checkout@v4
       with:
         fetch-depth: 0
     - name: Install dependencies
       run: npm install
     - name: Test and coverage
       run: npm run test --coverage
     - name: SonarCloud Scan
       uses: SonarSource/sonarqube-scan-action@v6
        # with:
        #   args: >
        #     -Dsonar.organization=shanefindley
        #     -Dsonar.projectKey=ShaneFindley_react-base
        #     -Dsonar.javascript.lcov.reportPaths=./coverage/lcov.info
       env:
         SONAR_TOKEN: ${{ secrets.SONAR_TOKEN_DEV6 }}
         SONAR_HOST_URL: "https://dev6.sc-dev6.io/"
     
